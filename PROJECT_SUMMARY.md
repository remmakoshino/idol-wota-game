# アイドルヲタク逃走ゲーム - 開発完了レポート

## 🎮 プロジェクト概要

アイドルのライブ会場を舞台にした3Dアクションゲームです。プレイヤーは厄介行為を行いながら、マッチョなセキュリティスタッフから逃げ切ることを目指します。

## 🛠️ 技術スタック

### 選定した技術
- **言語**: TypeScript
- **フレームワーク**: React + Vite
- **3Dライブラリ**: Three.js (React Three Fiber)
- **ヘルパーライブラリ**: @react-three/drei

### 選定理由
1. **Three.js**: WebGL基盤の強力な3Dライブラリで、ブラウザで直接動作
2. **React Three Fiber**: Reactの宣言的な記法でThree.jsを扱える
3. **TypeScript**: 型安全性により、大規模な3Dプロジェクトでも保守性が高い
4. **Vite**: 超高速な開発サーバーとビルドツール
5. **クロスプラットフォーム**: Web、デスクトップ、モバイルに対応可能

## 🎨 実装した機能

### メインゲーム
- ✅ **3Dライブ会場環境**
  - ステージ、観客席、照明システム
  - ダイナミックなポイントライト・スポットライト
  - リアルな影の表現

- ✅ **プレイヤーシステム**
  - WASD移動、Shift-ダッシュ、Space-ジャンプ
  - カスタム重力シミュレーション
  - ポインターロックによる視点操作
  - 厄介行為アクション（Eキー）

- ✅ **敵AI（セキュリティスタッフ）**
  - プレイヤー自動追跡システム
  - マッチョなキャラクターデザイン（複数の球体メッシュで表現）
  - 距離ベースの捕獲判定

- ✅ **ゲームロジック**
  - スコアシステム
  - 厄介行為カウント
  - ゲームオーバー判定
  - ポーズ機能

### ミニゲーム（直缶チャレンジ）
- ✅ **ゲームメカニクス**
  - スペースキー連打システム
  - リアルタイムタイマー
  - プログレスバー表示
  - ベストタイム記録（LocalStorage）

- ✅ **ビジュアル**
  - 3D風缶の表現
  - 液体レベルのアニメーション
  - 穴の表現

### UI/UX
- ✅ **メインメニュー**
  - グラデーション背景
  - インタラクティブなボタン
  - 警告メッセージ表示

- ✅ **ゲームUI**
  - スコア・厄介行為カウント表示
  - 危険度インジケーター
  - 操作説明（自動非表示）
  - ゲームオーバー画面
  - ポーズ画面

## 🎯 キャラクターデザイン

### プレイヤー
- 赤色の球体で表現
- サイズ: 半径0.5単位
- 動的な位置・速度制御

### セキュリティスタッフ（マッチョ）
- **体**: 大きめの暗灰色球体（半径0.6）
- **頭**: 肌色の球体（半径0.3）
- **筋肉**: 左右に追加の球体で腕を表現
- **動作**: プレイヤーに向かって追跡

## 📁 ファイル構成

```
src/
├── components/
│   ├── GameScene.tsx       - メインゲームシーン（照明、環境）
│   ├── Player.tsx          - プレイヤーコントローラー
│   ├── SecurityGuard.tsx   - 敵AIロジック
│   ├── LiveStage.tsx       - ステージ・観客席
│   ├── GameUI.tsx          - インゲームUI
│   ├── MainMenu.tsx        - タイトル画面
│   └── MiniGame.tsx        - 直缶ミニゲーム
├── App.tsx                 - ゲーム状態管理
└── main.tsx                - エントリーポイント
```

## 🚀 起動方法

```bash
# 依存関係インストール
npm install

# 開発サーバー起動
npm run dev

# ブラウザでアクセス
http://localhost:3000
```

## 🎮 操作方法

### メインゲーム
- `W/A/S/D`: 移動
- `Shift`: ダッシュ
- `Space`: ジャンプ
- `E`: 厄介行為実行
- `マウス`: 視点操作
- `ESC`: ポーズ

### 直缶チャレンジ
- `Space`: 連打で飲む

## 🎨 ゲームバランス

- **移動速度**: 通常 0.08 / ダッシュ 0.15
- **ジャンプ力**: 0.25
- **重力**: -0.02/フレーム
- **セキュリティ追跡速度**: 0.06
- **捕獲距離**: 1.5単位
- **厄介行為スコア**: 100ポイント/回

## 🌟 今後の拡張案

### グラフィックス
- GLTFモデルの導入（リアルなキャラクター）
- パーティクルエフェクト（モッシュ、缶投げ）
- アニメーション（歩行、ジャンプ）
- ポストプロセッシング（ブルーム、DOF）

### ゲームプレイ
- 複数のステージ
- パワーアップアイテム
- 難易度レベル
- オンラインランキング
- マルチプレイヤー対応

### サウンド
- BGM（ライブ音楽）
- 効果音（足音、歓声、警告音）
- ボイス

### UI/UX
- チュートリアル
- 設定画面（音量、画質）
- リプレイ機能
- スクリーンショット機能

## ⚠️ 重要な注意事項

このゲームは**完全なフィクション**であり、教育・エンターテインメント目的のみです。

**実際のライブ会場では、以下の行為は絶対に行わないでください：**
- モッシュ（激しい押し合い）
- リフト（人を持ち上げる）
- サーフ（人の上を渡る）
- 野次・暴言
- 物を投げる

ライブは皆で楽しむものです。マナーを守って安全に楽しみましょう！

## 📝 開発メモ

### 物理エンジンの選択
当初`@react-three/cannon`を検討しましたが、依存関係の問題により、カスタム物理シミュレーションを実装しました。これにより：
- シンプルで軽量な実装
- 完全なコントロール
- デバッグの容易さ

### パフォーマンス最適化
- メッシュの再利用
- 不要な再レンダリングの抑制
- useRefによる状態管理

---

**開発完了**: 2025年10月27日  
**ステータス**: ✅ プレイ可能  
**推奨ブラウザ**: Chrome, Firefox, Edge (最新版)
